<!DOCTYPE html>
<html>
<head>
    <title>Newsletter dos Deputados Federais</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
		body {
			background-color: #f2f2f2;
			font-family: Arial, sans-serif;
		}
		h1 {
			text-align: center;
			font-size: 36px;
			margin-top: 50px;
		}
	</style>
</head>
<body>
    <header>
        <nav>
            <div class="imgBox">
                <a href="./index.html">
                    <img src="./logo_img.png" alt="">
                </a>
            </div>
            <div class="menuBox">
                <ul class="menuList">
                    <li class="menuTopics"><a href="telalogada.html">In√≠cio</a></li>
                    <li class="menuTopics"><a href="telalogada.html">Valores</a></li>
                    <li class="menuTopics"><a href="telalogada.html">M√©tricas</a></li>
                    <li class="menuTopics"><a href="FAQ.html">FAQ</a></li>
                    <li class="menuTopics"><a href="newsletterdeputados.html">News</a></li>
                    <li class="menuTopics"><a href="consultadeputados.html">Avalie!</a></li>
                    <li class="menuTopics"><a href="questionario_politico.html">Question√°rio</a></li>
                    <li class="menuTopics"><a href="telalogada.html">Contatos</a></li>
                    <li class="menuTopics"><a href="index.html">Sair</a></li>
                    <div>Seja Bem-vindo, Usu√°rio!</div>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <h1>Breaking News! | Politicando¬Æ  üì∞</h1>
    <h3>Digite agora o Deputado e acompanhe-o nas principais m√≠dias do pa√≠s!</h3><br>
    <form id="newsForm">
        <label for="publicFigure">Deputado(a) Federal:</label>
        <input type="text" id="publicFigure" required><br><br>
        
        <input type="submit" value="Buscar Not√≠cias">
    </form>

    <div id="newsResults"></div>

    <script>
        // Evento de envio do formul√°rio
        $('#newsForm').submit(function(event) {
            event.preventDefault();
            var publicFigure = $('#publicFigure').val();

            // Chamada AJAX para a API GNews
            $.ajax({
                url: 'https://gnews.io/api/v4/search',
                type: 'GET',
                data: {
                    q: publicFigure + ' deputado federal',
                    token: 'f707b2bbade36f595d64bc8d6bf84965',
                    lang: 'pt',
                    country: 'br'
                },
                success: function(response) {
                    // Processar e exibir as not√≠cias
                    var news = response.articles;
                    var newsResults = $('#newsResults');
                    newsResults.empty();

                    if (news.length > 0) {
                        newsResults.append('<h2>Not√≠cias sobre ' + publicFigure + '</h2>');

                        for (var i = 0; i < news.length; i++) {
                            var article = news[i];
                            newsResults.append('<h3>' + article.title + '</h3>');
                            newsResults.append('<p>' + article.description + '</p>');
                            newsResults.append('<a href="' + article.url + '">Leia mais</a><br><br>');
                        }
                    } else {
                        newsResults.append('<p>Nenhuma not√≠cia encontrada.</p>');
                    }
                },
                error: function(xhr, status, error) {
                    var errorMessage = xhr.status + ': ' + xhr.statusText;
                    alert('Erro ao acessar as not√≠cias. Detalhes do erro: ' + errorMessage);
                }
            });
        });
    </script>
</body>
</html>
