<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador | Politicando®</title>
	<link rel="stylesheet" href="simuladordospoliticos.css">
</head>
<body>
	<div class="container">
		<h1>Simulador dos Políticos | Politicando®</h1>
		<input id="ipt_nome_deputado" onkeydown="ver_deputado()" list="list_deputados">

		<datalist id="list_deputados">
		</datalist>
		<div class="deputado">
			<div class="foto">
				<img src="foto-deputado1.jpg" alt="Foto do Deputado 1">
			</div>
			<div class="info">
				<div class="nome">Nome do Deputado 1</div>
				<div class="partido">Partido do Deputado 1</div>
			</div>
		</div>
		<div class="deputado">
			<div class="foto">
				<img src="foto-deputado2.jpg" alt="Foto do Deputado 2">
			</div>
			<div class="info">
				<div class="nome">Nome do Deputado 2</div>
				<div class="partido">Partido do Deputado 2</div>
			</div>
		</div>
		<div class="comparacao">
			<div class="campo">Nome:</div>
			<div class="valor">Valor do Campo para o Deputado 1</div>
			<div class="valor">Valor do Campo para o Deputado 2</div>
		</div>
		<div class="comparacao">
			<div class="campo">Outro Campo:</div>
			<div class="valor">Valor do Outro Campo para o Deputado 1</div>
			<div class="valor">Valor do Outro Campo para o Deputado 2</div>
		</div>
	</div>
</body>

<script>
	function ver_deputado(){
	  var tBody = document.getElementById("deputados");
	var var_nome_deputado = ipt_nome_deputado.value.toLowerCase();
	fetch('https://dadosabertos.camara.leg.br/api/v2/deputados/')
	.then(response => response.json())
	.then(data => {
	  const deputados = data.dados;

	  var deputadosFiltrados = deputados.filter(deputado => deputado.nome.toLowerCase().includes(var_nome_deputado))
	  console.log(deputadosFiltrados)

	  	var datalist = document.getElementById("list_deputados");
		datalist.innerHTML = "";

		for(i=0; i < deputadosFiltrados.length; i++){

			var option = document.createElement('option');
			option.id = 'opcoes';
			option.value = 
			deputadosFiltrados[i].nome;

			document.getElementById('list_deputados').appendChild(option)
		}

		

	  deputadosFiltrados.forEach(deputado => {

		  var texto = `<tr>
			<td>${deputado.nome} - </td>
			  <td>${deputado.siglaPartido} - </td>
			  <img src="${deputado.urlFoto}" class="foto-deputado" width="120px">
			  <td>${deputado.siglaUf} - </td>
			  <td>${deputado.email} </td>
			</tr>`

console.log(deputado);
			tBody.innerHTML += texto;
	  });
	})
	.catch(error => {
	  console.error(error);
	});
}
</script>